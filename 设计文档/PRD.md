# NexusQA 产品需求文档 (PRD)

**文档版本**: 1.0
**创建日期**: 2025-11-26
**产品名称**: NexusQA
**产品定位**: AI驱动的现代化软件测试与质量保障管理平台

---

## 1. 产品概述

### 1.1 产品愿景

NexusQA 致力于成为企业级软件测试管理的智能化解决方案，通过整合 AI 能力显著提升测试效率，同时保持严格的质量管控流程，帮助团队实现"质量内建"的目标。

### 1.2 产品目标

| 目标类型 | 描述 | 衡量指标 |
|---------|------|---------|
| **效率提升** | 通过 AI 辅助减少测试用例编写时间 | 用例编写效率提升 50%+ |
| **质量保障** | 建立标准化的测试流程和评审机制 | 缺陷逃逸率降低 30% |
| **协作优化** | 打通测试-开发-产品的协作链路 | 缺陷解决周期缩短 40% |
| **可追溯性** | 完整的执行历史和缺陷追踪 | 100% 测试结果可追溯 |

### 1.3 目标用户

| 角色 | 职责 | 核心诉求 |
|------|------|---------|
| **测试工程师 (Tester)** | 用例编写、测试执行、缺陷提报 | 高效编写用例、快速执行测试 |
| **测试负责人 (QA Lead)** | 测试规划、用例评审、缺陷分配 | 全局把控质量、合理分配资源 |
| **管理员 (Admin)** | 项目管理、用户管理、系统配置 | 灵活配置、权限管控 |
| **开发工程师** | 查看测试结果、修复缺陷 | 快速定位问题、了解测试覆盖 |
| **产品经理** | 查看测试进度、需求验证 | 了解质量状态、验收功能 |

---

## 2. 功能架构

### 2.1 功能全景图

```
┌─────────────────────────────────────────────────────────────────────┐
│                          NexusQA 平台                                │
├─────────────────────────────────────────────────────────────────────┤
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐ │
│  │   项目管理   │  │  用例管理   │  │  计划管理   │  │  缺陷管理   │ │
│  │             │  │             │  │             │  │             │ │
│  │ • 项目CRUD  │  │ • 用例CRUD  │  │ • 计划CRUD  │  │ • 缺陷CRUD  │ │
│  │ • 成员管理  │  │ • 套件树形  │  │ • 用例关联  │  │ • 评论讨论  │ │
│  │ • 仓库关联  │  │ • AI生成    │  │ • 计划复制  │  │ • 状态流转  │ │
│  │             │  │ • 批量操作  │  │ • 执行统计  │  │ • 批量操作  │ │
│  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘ │
│                                                                      │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐ │
│  │  测试执行   │  │  AI 能力    │  │  统计分析   │  │  系统管理   │ │
│  │             │  │             │  │             │  │             │ │
│  │ • 执行记录  │  │ • 步骤生成  │  │ • 执行统计  │  │ • 用户管理  │ │
│  │ • 状态更新  │  │ • 字段填充  │  │ • 缺陷分布  │  │ • 权限管理  │ │
│  │ • 缺陷关联  │  │ • 视觉参考  │  │ • 进度追踪  │  │ • 国际化    │ │
│  │ • 历史追踪  │  │             │  │ • 趋势分析  │  │             │ │
│  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘ │
└─────────────────────────────────────────────────────────────────────┘
```

### 2.2 核心功能模块

#### 模块一: 项目管理

**功能描述**: 提供项目的创建、编辑、删除和成员管理能力。

| 功能点 | 描述 | 优先级 |
|-------|------|--------|
| 项目创建 | 创建新项目，设置名称、描述、封面图 | P0 |
| 项目列表 | 展示所有项目，支持搜索和筛选 | P0 |
| 项目详情 | 查看项目信息、统计数据 | P0 |
| 项目编辑 | 修改项目基本信息 | P1 |
| 项目删除 | 删除项目及关联数据（需确认） | P1 |
| 仓库关联 | 关联 GitHub/GitLab 仓库地址 | P2 |
| 成员管理 | 添加/移除项目成员 | P2 |

#### 模块二: 测试用例管理

**功能描述**: 提供测试用例的全生命周期管理，包括创建、编辑、组织、评审和批量操作。

| 功能点 | 描述 | 优先级 |
|-------|------|--------|
| 用例创建 | 创建测试用例，填写标题、描述、步骤等 | P0 |
| 用例编辑 | 修改用例内容、步骤、优先级等 | P0 |
| 用例删除 | 删除单个或批量删除用例 | P0 |
| 套件管理 | 创建/编辑/删除测试套件（树形结构） | P0 |
| 用例搜索 | 按标题、标签、状态等搜索用例 | P0 |
| 用例筛选 | 按优先级、评审状态、分配者筛选 | P1 |
| 批量操作 | 批量删除、移动、更新状态、评审 | P1 |
| 用例复制 | 复制已有用例创建新用例 | P2 |
| 用例导入 | 从 JSON/Excel 批量导入用例 | P2 |
| 用例导出 | 导出用例为 JSON/Excel 格式 | P2 |

**用例数据模型**:

```
TestCase {
  id: string                    // 唯一标识
  title: string                 // 用例标题
  description: string           // 详细描述
  preconditions: string         // 前置条件
  userStory: string             // 用户故事 (BDD)
  acceptanceCriteria: string    // 验收标准 (BDD)
  steps: TestStep[]             // 测试步骤
  status: TestStatus            // 执行状态
  priority: Priority            // 优先级 (P0-P3)
  reviewStatus: ReviewStatus    // 评审状态
  tags: string[]                // 标签
  visualReference: string       // AI生成的视觉参考
  authorId: string              // 创建者
  assigneeId: string            // 分配者
  suiteId: string               // 所属套件
  projectId: string             // 所属项目
}
```

#### 模块三: 测试计划管理

**功能描述**: 提供测试计划的创建、执行和复制能力。

| 功能点 | 描述 | 优先级 |
|-------|------|--------|
| 计划创建 | 创建测试计划，设置名称、描述 | P0 |
| 计划列表 | 展示项目下所有测试计划 | P0 |
| 添加用例 | 将测试用例添加到计划 | P0 |
| 移除用例 | 从计划中移除用例 | P0 |
| 计划执行 | 进入计划执行页面，逐个执行用例 | P0 |
| 进度统计 | 显示计划执行进度和通过率 | P0 |
| 计划复制 | 复制计划及其所有用例（含快照） | P1 |
| 计划编辑 | 修改计划名称、描述 | P1 |
| 计划删除 | 删除计划及关联执行记录 | P1 |

**计划复制特性**:
- 复制计划时自动在名称后添加 "(Copy)"
- 为每个关联用例生成快照 (snapshot)
- 所有执行状态重置为 UNTESTED
- 保留原计划和用例的完整信息

#### 模块四: 测试执行

**功能描述**: 提供测试用例的执行、结果记录和历史追踪能力。

| 功能点 | 描述 | 优先级 |
|-------|------|--------|
| 执行用例 | 标记用例执行结果 (Pass/Fail/Blocked) | P0 |
| 执行备注 | 记录执行过程中的备注信息 | P0 |
| 缺陷关联 | 执行失败时关联或创建缺陷 | P0 |
| 执行历史 | 查看用例的所有执行记录 | P0 |
| 执行者记录 | 自动记录执行者和执行时间 | P1 |
| 环境信息 | 记录执行环境信息 | P2 |
| 证据附件 | 上传截图或日志作为证据 | P2 |

**执行状态流转**:

```
UNTESTED → PASSED    (执行通过)
         → FAILED    (执行失败，必须关联缺陷)
         → BLOCKED   (被阻塞，无法执行)
         → SKIPPED   (跳过执行)
```

#### 模块五: 缺陷管理

**功能描述**: 提供完整的缺陷生命周期管理能力。

| 功能点 | 描述 | 优先级 |
|-------|------|--------|
| 缺陷创建 | 创建缺陷，填写标题、描述、严重级 | P0 |
| 缺陷列表 | 展示项目下所有缺陷，支持搜索筛选 | P0 |
| 缺陷编辑 | 修改缺陷信息、状态、分配者 | P0 |
| 状态流转 | 缺陷状态变更 (Open→In Progress→Resolved→Closed) | P0 |
| 缺陷讨论 | 在缺陷下添加评论讨论 | P1 |
| 批量操作 | 批量删除、分配、状态更新 | P1 |
| 外部链接 | 关联外部缺陷系统 (JIRA/Bugzilla) | P2 |
| 缺陷统计 | 按状态、严重级统计缺陷分布 | P2 |

**缺陷数据模型**:

```
Defect {
  id: string                    // 唯一标识
  title: string                 // 缺陷标题
  description: string           // 详细描述
  status: DefectStatus          // 状态
  severity: Severity            // 严重级
  authorId: string              // 创建者
  assigneeId: string            // 分配者
  projectId: string             // 所属项目
  externalIssueId: string       // 外部系统ID
  externalUrl: string           // 外部系统链接
}
```

**缺陷状态流转**:

```
OPEN → IN_PROGRESS → RESOLVED → CLOSED
  ↑        ↓            ↓
  └────────┴────────────┘ (重新打开)
```

#### 模块六: AI 辅助能力

**功能描述**: 集成 Google Gemini AI，提供智能化测试辅助能力。

| 功能点 | 描述 | 优先级 |
|-------|------|--------|
| 步骤生成 | 根据用例标题和描述自动生成测试步骤 | P0 |
| 字段填充 | AI 自动生成用户故事、验收标准等字段 | P1 |
| 视觉参考 | AI 生成 UI 参考图辅助测试设计 | P2 |

**AI 步骤生成规则**:
- 输入: 用例标题 + 描述
- 输出: 3-8 个结构化测试步骤
- 格式: `{ action: string, expected: string }`
- 模型: Gemini 2.5 Flash

#### 模块七: 统计分析

**功能描述**: 提供测试执行和缺陷的统计分析能力。

| 功能点 | 描述 | 优先级 |
|-------|------|--------|
| 执行统计 | 显示 Pass/Fail/Blocked 比例 | P0 |
| 进度追踪 | 计划执行进度可视化 | P0 |
| 缺陷分布 | 按状态、严重级统计缺陷 | P1 |
| 甜甜圈图 | 可视化展示测试结果分布 | P1 |
| 趋势分析 | 执行和缺陷趋势图表 | P2 |

#### 模块八: 系统管理

**功能描述**: 提供用户、权限和系统配置能力。

| 功能点 | 描述 | 优先级 |
|-------|------|--------|
| 用户列表 | 查看系统所有用户 | P0 |
| 角色管理 | Admin/QA Lead/Tester 三级角色 | P1 |
| 国际化 | 支持中英文切换 | P1 |
| 主题设置 | 深色/浅色模式切换 | P2 |

---

## 3. 用户角色与权限

### 3.1 角色定义

| 角色 | 代码 | 描述 |
|------|------|------|
| **管理员** | ADMIN | 系统最高权限，可管理所有项目和用户 |
| **测试负责人** | QA_LEAD | 项目级权限，可管理用例评审和缺陷分配 |
| **测试工程师** | TESTER | 执行级权限，专注于测试执行和缺陷提报 |

### 3.2 权限矩阵

| 功能 | Admin | QA Lead | Tester |
|------|:-----:|:-------:|:------:|
| 创建项目 | ✅ | ❌ | ❌ |
| 删除项目 | ✅ | ❌ | ❌ |
| 编辑项目 | ✅ | ✅ | ❌ |
| 创建用例 | ✅ | ✅ | ❌ |
| 编辑用例 | ✅ | ✅ | ❌ |
| 删除用例 | ✅ | ✅ | ❌ |
| 评审用例 | ✅ | ✅ | ❌ |
| 执行用例 | ✅ | ✅ | ✅ |
| 创建缺陷 | ✅ | ✅ | ✅ |
| 分配缺陷 | ✅ | ✅ | ❌ |
| 评论缺陷 | ✅ | ✅ | ✅ |
| 用户管理 | ✅ | ❌ | ❌ |
| 导入导出 | ✅ | ✅ | ❌ |

---

## 4. 核心业务流程

### 4.1 测试用例生命周期

```
┌──────────────────────────────────────────────────────────────────┐
│                      测试用例生命周期                             │
├──────────────────────────────────────────────────────────────────┤
│                                                                  │
│   ┌─────────┐    ┌─────────┐    ┌─────────┐    ┌─────────┐      │
│   │  创建   │ →  │  编辑   │ →  │  评审   │ →  │  执行   │      │
│   └─────────┘    └─────────┘    └─────────┘    └─────────┘      │
│        │              │              │              │            │
│        ▼              ▼              ▼              ▼            │
│   [AI辅助生成]   [补充细节]    [审核通过/     [记录结果]        │
│   - 测试步骤     - 前置条件     驳回修改]     - Pass/Fail       │
│   - 验收标准     - 用户故事                   - 关联缺陷        │
│   - 视觉参考     - 标签分类                   - 执行历史        │
│                                                                  │
└──────────────────────────────────────────────────────────────────┘
```

### 4.2 测试计划执行流程

```
┌──────────────────────────────────────────────────────────────────┐
│                      测试计划执行流程                             │
├──────────────────────────────────────────────────────────────────┤
│                                                                  │
│   ┌─────────┐    ┌─────────┐    ┌─────────┐    ┌─────────┐      │
│   │创建计划 │ →  │添加用例 │ →  │执行测试 │ →  │查看报告 │      │
│   └─────────┘    └─────────┘    └─────────┘    └─────────┘      │
│        │              │              │              │            │
│        ▼              ▼              ▼              ▼            │
│   [设置名称]    [批量选择]     [逐个执行]     [统计分析]        │
│   [设置描述]    [确认添加]     [记录结果]     [进度追踪]        │
│                                [关联缺陷]     [导出报告]        │
│                                                                  │
│   ────────────────────────────────────────────────────────────   │
│                                                                  │
│   [计划复制功能]                                                 │
│   复制计划 → 生成快照 → 重置状态 → 新的执行周期                  │
│                                                                  │
└──────────────────────────────────────────────────────────────────┘
```

### 4.3 缺陷处理流程

```
┌──────────────────────────────────────────────────────────────────┐
│                        缺陷处理流程                               │
├──────────────────────────────────────────────────────────────────┤
│                                                                  │
│   ┌─────────┐    ┌─────────┐    ┌─────────┐    ┌─────────┐      │
│   │  创建   │ →  │  分配   │ →  │  修复   │ →  │  验证   │      │
│   │ (OPEN)  │    │(OPEN)   │    │(IN_PROG)│    │(RESOLVED)│     │
│   └─────────┘    └─────────┘    └─────────┘    └─────────┘      │
│        │              │              │              │            │
│        │              │              │              ▼            │
│        │              │              │         ┌─────────┐      │
│        │              │              │         │  关闭   │      │
│        │              │              │         │(CLOSED) │      │
│        │              │              │         └─────────┘      │
│        │              │              │              │            │
│        ▼              ▼              ▼              ▼            │
│   [填写信息]    [指定负责人]   [开发修复]     [QA验证]          │
│   [设置严重级]  [添加评论]     [更新状态]     [通过/重开]        │
│                                                                  │
└──────────────────────────────────────────────────────────────────┘
```

---

## 5. 非功能需求

### 5.1 性能需求

| 指标 | 要求 | 说明 |
|------|------|------|
| 页面加载 | < 2s | 首屏加载时间 |
| API 响应 | < 500ms | 常规接口响应时间 |
| AI 生成 | < 10s | AI 步骤生成响应时间 |
| 并发用户 | 100+ | 同时在线用户数 |
| 数据量 | 10万+ | 单项目支持用例数 |

### 5.2 可用性需求

| 指标 | 要求 |
|------|------|
| 系统可用性 | 99.9% |
| 数据备份 | 每日自动备份 |
| 灾难恢复 | RPO < 1小时, RTO < 4小时 |

### 5.3 安全需求

| 类别 | 要求 |
|------|------|
| 身份认证 | 用户名密码 + 可选 SSO |
| 权限控制 | 基于角色的访问控制 (RBAC) |
| 数据加密 | 传输加密 (HTTPS) + 存储加密 |
| 审计日志 | 关键操作记录审计日志 |
| 防护措施 | XSS/CSRF/SQL注入防护 |

### 5.4 兼容性需求

| 类别 | 支持范围 |
|------|---------|
| 浏览器 | Chrome 90+, Firefox 88+, Safari 14+, Edge 90+ |
| 分辨率 | 1280x720 及以上 |
| 响应式 | 支持桌面端、平板端 |

---

## 6. 技术架构

### 6.1 技术栈

| 层级 | 技术选型 | 说明 |
|------|---------|------|
| **前端框架** | React 19 + Next.js 15 | 现代化全栈框架 |
| **类型系统** | TypeScript | 静态类型检查 |
| **样式方案** | Tailwind CSS | 实用优先的 CSS 框架 |
| **状态管理** | Zustand | 轻量级状态管理 |
| **数据库** | SQLite (Prisma ORM) | 本地/轻量部署 |
| **AI 服务** | Google Gemini | 生成式 AI 能力 |
| **测试框架** | Jest + Playwright | 单元测试 + E2E 测试 |

### 6.2 系统架构图

```
┌─────────────────────────────────────────────────────────────────┐
│                         客户端 (Browser)                         │
│  ┌─────────────────────────────────────────────────────────────┐│
│  │                    Next.js App (React 19)                   ││
│  │  ┌───────────┐  ┌───────────┐  ┌───────────┐  ┌──────────┐ ││
│  │  │   Views   │  │Components │  │  Contexts │  │  Store   │ ││
│  │  │  (Pages)  │  │   (UI)    │  │  (i18n)   │  │(Zustand) │ ││
│  │  └───────────┘  └───────────┘  └───────────┘  └──────────┘ ││
│  └─────────────────────────────────────────────────────────────┘│
└─────────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│                      Next.js API Routes                          │
│  ┌───────────┐  ┌───────────┐  ┌───────────┐  ┌───────────┐    │
│  │ /projects │  │/testcases │  │  /plans   │  │ /defects  │    │
│  └───────────┘  └───────────┘  └───────────┘  └───────────┘    │
│  ┌───────────┐  ┌───────────┐  ┌───────────┐                   │
│  │   /runs   │  │   /ai/*   │  │  /users   │                   │
│  └───────────┘  └───────────┘  └───────────┘                   │
└─────────────────────────────────────────────────────────────────┘
                              │
              ┌───────────────┼───────────────┐
              ▼               ▼               ▼
     ┌─────────────┐  ┌─────────────┐  ┌─────────────┐
     │   Prisma    │  │   Gemini    │  │   外部API   │
     │    ORM      │  │     AI      │  │  (JIRA等)   │
     └─────────────┘  └─────────────┘  └─────────────┘
              │
              ▼
     ┌─────────────┐
     │   SQLite    │
     │  Database   │
     └─────────────┘
```

---

## 7. 数据模型

### 7.1 ER 关系图

```
┌─────────────────────────────────────────────────────────────────┐
│                          数据关系图                              │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│                         ┌─────────┐                              │
│                         │ Project │                              │
│                         └────┬────┘                              │
│           ┌──────────┬───────┼───────┬──────────┐               │
│           ▼          ▼       ▼       ▼          ▼               │
│     ┌──────────┐ ┌────────┐ ┌─────┐ ┌──────┐ ┌──────┐          │
│     │TestSuite │ │TestCase│ │Plan │ │Defect│ │ User │          │
│     └────┬─────┘ └───┬────┘ └──┬──┘ └──┬───┘ └──────┘          │
│          │           │         │       │                        │
│          ▼           │         ▼       ▼                        │
│     ┌──────────┐     │    ┌────────┐  ┌─────────┐              │
│     │TestCase  │◄────┘    │TestRun │  │Comment  │              │
│     └──────────┘          └───┬────┘  └─────────┘              │
│          │                    │                                 │
│          ▼                    │                                 │
│     ┌──────────┐              │                                 │
│     │ TestStep │              │                                 │
│     └──────────┘              │                                 │
│          │                    │                                 │
│          ▼                    │                                 │
│     ┌───────────────┐         │                                 │
│     │ExecutionRecord│◄────────┘                                │
│     └───────┬───────┘                                          │
│             │                                                   │
│             ▼                                                   │
│        ┌─────────┐                                             │
│        │ Defect  │ (关联)                                      │
│        └─────────┘                                             │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

### 7.2 核心实体说明

| 实体 | 说明 | 关键字段 |
|------|------|---------|
| **Project** | 项目 | name, description, coverImage, repositoryUrl |
| **TestSuite** | 测试套件 | name, parentId (支持嵌套) |
| **TestCase** | 测试用例 | title, steps, status, priority, reviewStatus |
| **TestStep** | 测试步骤 | action, expected, order |
| **TestPlan** | 测试计划 | name, description |
| **TestRun** | 执行记录 | status, notes, snapshot, executedBy |
| **ExecutionRecord** | 历史记录 | status, executedBy, executedAt |
| **Defect** | 缺陷 | title, status, severity, assigneeId |
| **DefectComment** | 缺陷评论 | content, authorId |
| **User** | 用户 | name, email, role |
| **Requirement** | 需求 | title, description (可关联用例) |

---

## 8. API 设计

### 8.1 API 端点列表

| 方法 | 端点 | 描述 |
|------|------|------|
| GET/POST | `/api/projects` | 项目列表/创建 |
| GET/PUT/DELETE | `/api/projects/[id]` | 项目详情/更新/删除 |
| POST | `/api/projects/import` | 批量导入用例 |
| GET/POST | `/api/testcases` | 用例列表/创建更新 |
| DELETE | `/api/testcases?ids=` | 批量删除用例 |
| POST | `/api/testcases/bulk` | 批量操作用例 |
| GET/POST | `/api/suites` | 套件列表/创建 |
| PUT/DELETE | `/api/suites/[id]` | 套件更新/删除 |
| GET/POST | `/api/projects/[id]/plans` | 计划列表/创建 |
| GET/PATCH/DELETE | `/api/plans/[id]` | 计划详情/更新/删除 |
| POST | `/api/plans/[id]/duplicate` | 复制计划 |
| POST/DELETE | `/api/plans/[id]/cases` | 添加/移除用例 |
| PATCH | `/api/runs/[id]` | 更新执行状态 |
| GET/POST | `/api/defects` | 缺陷列表/创建 |
| PUT/DELETE | `/api/defects/bulk` | 批量操作缺陷 |
| POST | `/api/defects/[id]/comments` | 添加缺陷评论 |
| POST | `/api/ai/generate-steps` | AI 生成测试步骤 |
| POST | `/api/ai/generate-field` | AI 生成字段内容 |
| GET | `/api/users` | 用户列表 |

### 8.2 API 响应格式

**成功响应**:
```json
{
  "success": true,
  "data": { ... }
}
```

**错误响应**:
```json
{
  "success": false,
  "error": "Error message"
}
```

---

## 9. 界面设计规范

### 9.1 色彩体系

| 用途 | 颜色 | 色值 |
|------|------|------|
| 背景色 | 奶油白 | `#F2F0E9` |
| 表面色 | 纯白 | `#FFFFFF` |
| 品牌色 | 品牌黄 | `#FCD34D` |
| 深色 | 接近黑 | `#18181B` |
| 通过状态 | 绿色 | `bg-green-100` / `text-green-700` |
| 失败状态 | 红色 | `bg-red-100` / `text-red-700` |
| 阻塞状态 | 橙色 | `bg-orange-100` / `text-orange-700` |
| 未测状态 | 灰色 | `bg-gray-100` / `text-gray-600` |

### 9.2 优先级标识

| 优先级 | 背景色 | 圆点色 |
|-------|-------|-------|
| P0 (Critical) | `bg-red-50` | `bg-red-500` |
| P1 (High) | `bg-orange-50` | `bg-orange-500` |
| P2 (Medium) | `bg-blue-50` | `bg-blue-500` |
| P3 (Low) | `bg-zinc-100` | `bg-zinc-400` |

### 9.3 字体规范

- **字体族**: Plus Jakarta Sans
- **标题**: font-black (900), 32-48px
- **副标题**: font-bold (700), 18-24px
- **正文**: font-medium (500), 14px
- **标签**: font-bold (700), 10-12px

### 9.4 组件规范

| 组件 | 圆角 | 阴影 |
|------|------|------|
| 卡片 | `rounded-2xl` (16px) | `shadow-sm` |
| 模态框 | `rounded-[2rem]` (32px) | `shadow-xl` |
| 按钮 | `rounded-xl` (12px) | - |
| 输入框 | `rounded-lg` (8px) | - |

---

## 10. 质量标准

### 10.1 SOP 红线规则

| 红线 | 说明 | 违反后果 |
|------|------|---------|
| **Fail 必须关联 Bug** | 执行失败必须创建或关联缺陷 | 执行记录无效 |
| **未评审禁入执行** | 评审状态为 PENDING 不应正式执行 | 流程阻断 |
| **冒烟测试门禁** | 单元测试覆盖 <80%, Lint 失败 | 拒绝提测 |
| **模糊 AC 拒绝** | "体验良好"等模糊验收标准 | QA 有权拒绝 |

### 10.2 测试分层标准

| 层级 | 占比 | 负责人 | 工具 |
|------|------|--------|------|
| 单元测试 | 70% | 开发 | Jest |
| 集成测试 | 20% | 开发+QA | Supertest |
| E2E 测试 | 10% | QA | Playwright |

### 10.3 代码质量标准

- ESLint: 0 个 Error
- TypeScript: 严格模式
- 单元测试覆盖率: ≥ 80%
- 预提交钩子: Husky + lint-staged

---

## 11. 国际化支持

### 11.1 支持语言

| 语言 | 代码 | 状态 |
|------|------|------|
| English | `en` | ✅ 已支持 |
| 简体中文 | `zh` | ✅ 已支持 |

### 11.2 实现方式

- React Context 管理语言状态
- 中央翻译文件 (`translations.ts`)
- `useLanguage()` Hook 获取翻译函数

---

## 12. 版本规划

### 12.1 V1.0 (MVP) - 当前版本

- [x] 项目管理基础功能
- [x] 测试用例 CRUD
- [x] 测试套件树形管理
- [x] 测试计划创建与执行
- [x] 计划复制功能
- [x] 缺陷管理系统
- [x] 缺陷讨论功能
- [x] AI 步骤生成
- [x] 执行历史追踪
- [x] 基础统计分析
- [x] 中英文国际化

### 12.2 V1.1 (规划中)

- [ ] 用例导入导出 (Excel)
- [ ] 报告导出 (PDF/HTML)
- [ ] 更丰富的统计图表
- [ ] 批量 AI 生成
- [ ] 用例模板功能

### 12.3 V2.0 (远景)

- [ ] CI/CD 集成
- [ ] Slack/钉钉通知
- [ ] 自动化测试对接
- [ ] 多租户支持
- [ ] 高级权限管理
- [ ] 性能测试集成

---

## 13. 附录

### 13.1 术语表

| 术语 | 说明 |
|------|------|
| **Test Case** | 测试用例，描述一个测试场景 |
| **Test Suite** | 测试套件，用于组织测试用例的文件夹 |
| **Test Plan** | 测试计划，一组待执行的测试用例 |
| **Test Run** | 测试执行记录，计划中单个用例的执行 |
| **Execution Record** | 执行历史，用例的历史执行记录 |
| **Defect** | 缺陷/Bug，测试发现的问题 |
| **Review Status** | 评审状态，用例的评审进度 |
| **BDD** | 行为驱动开发，一种测试方法论 |
| **AC** | Acceptance Criteria，验收标准 |

### 13.2 参考文档

- [Next.js 文档](https://nextjs.org/docs)
- [Prisma 文档](https://www.prisma.io/docs)
- [Tailwind CSS 文档](https://tailwindcss.com/docs)
- [Zustand 文档](https://github.com/pmndrs/zustand)
- [Google Gemini API](https://ai.google.dev/docs)

---

**文档维护**: 产品团队
**最后更新**: 2025-11-26
